<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
  <title>KMacroExpanderBase</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>
<span style="font-size : 10pt;">
<table width="100%">
  <tr>
    <td width ="70%">
      <h1>class KMacroExpanderBase</h1><hr>
      <h3><i style="color : #00aa00"></i></h3>
    </td>
  </tr>
</table>
<table cellpadding="10">
  <tr>
    <td valign="top" width="35%">
      <table bgcolor="#f7f7ff" cellpadding="4">
        <tr>
          <td width="10%" align=left>Module</td>
          <td width="30%" align=left>kdecore</td>
        </tr>
        <tr>
          <td width="10%" align=left>Namespace</td>
          <td width="30%" align=left></td>
        </tr>
        <tr>
          <td>Class</td>
          <td>KMacroExpanderBase</td>
        </tr>
        <tr>
          <td>Inherits</td>
          <td></td>
        </tr>
      </table>
    </td>
    <td width="65%">
      \class KMacroExpanderBase kmacroexpander.h <KMacroExpanderBase>
</p>
<p>
Abstract base class for the worker classes behind the KMacroExpander namespace
and the KCharMacroExpander and KWordMacroExpander classes.
</p>
<p>
<b>Author</b> Oswald Buddenhagen <ossi@kde.org>
    </td>
  </tr>
</table>
<hr>
<hr>
<h3>methods</h3><ul style="list-style-type : none">
<li style="list-style-type : none"><b style="color : #000000;">KMacroExpanderBase</b> (c)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>ctor</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          KDE 4.1.0 and later only
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>c</td><td>QChar</td><td align="right">QLatin1Char('%')</td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Constructor.</p>
<p>
<b>c</b> - escape char indicating start of macros, or QChar.null for none
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">KMacroExpanderBase</b> (a0)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>ctor</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          before KDE 4.1.0 only
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>a0</td><td>QChar</td><td align="right">QLatin1Char('%')</td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">

    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">escapeChar</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>QChar</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Obtain the macro escape character.
Returns escape char indicating start of macros, or QChar.null if none
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">expandEscapedMacro</b> (str, pos, ret)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>int</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>str</td><td>QString</td><td align="right"></td></tr>
              <tr><td>pos</td><td>int</td><td align="right"></td></tr>
              <tr><td>ret</td><td>QStringList</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
This function is called every time the escape char is found if it is
not QChar.null. It should determine whether the
string starting at <b>pos</b> witin <b>str</b> is a valid macro and return
the substitution value for it if so.</p>
<p>
<b>str</b> - the input string</p>
<p>
<b>pos</b> - the offset within <b>str.</b> Note that this is the position of
the occurrence of the escape char</p>
<p>
<b>ret</b> - return value: the string to substitute for the macro
Returns If greater than zero, the number of chars at <b>pos</b> in <b>str</b>
to substitute with <b>ret</b> (i.e., a valid macro was found). If less
than zero, subtract this value from <b>pos</b> (to skip a macro, i.e.,
substitute it with itself). If zero, scanning continues as if no
escape char was encountered at all.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">expandMacros</b> (str)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>str</td><td>QString</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Perform safe macro expansion (substitution) on a string.
</p>
<p></p>
<p>
<b>str</b> - the string in which macros are expanded in-place
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">expandMacrosShellQuote</b> (str)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>bool, int (pos)</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>str</td><td>QString</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Perform safe macro expansion (substitution) on a string for use
in shell commands.
</p>
<p>
<h3>*NIX notes</h3>
</p>
<p>
Explicitly supported shell constructs:
\ '' "" $'' $"" {} () $(()) ${} $() ``
</p>
<p>
Implicitly supported shell constructs:
(())
</p>
<p>
Unsupported shell constructs that will cause problems:
Shortened &quot;<tt>case $v in pat)</tt>&quot; syntax. Use
&quot;<tt>case $v in (pat)</tt>&quot; instead.
</p>
<p>
The rest of the shell (incl. bash) syntax is simply ignored,
as it is not expected to cause problems.
</p>
<p>
Note that bash contains a bug which makes macro expansion within
double quoted substitutions (<tt>"${VAR:-%macro}"</tt>) inherently
insecure.
</p>
<p>
For security reasons, <b>never</b> put expandos in command line arguments
that are shell commands by themselves -
&quot;<tt>sh -c 'foo \%f'</tt>&quot; is taboo.
&quot;<tt>file=\%f sh -c 'foo "$file"'</tt>&quot; is OK.
</p>
<p>
<h3>Windows notes</h3>
</p>
<p>
All quoting syntax supported by KShell is supported here as well.
Additionally, command grouping via parentheses is recognized - note
however, that the parser is much stricter about unquoted parentheses
than cmd itself.
The rest of the cmd syntax is simply ignored, as it is not expected
to cause problems - do not use commands that embed other commands,
though - &quot;<tt>for /f ...</tt>&quot; is taboo.
</p>
<p></p>
<p>
<b>str</b> - the string in which macros are expanded in-place</p>
<p>
<b>pos</b> - the position inside the string at which parsing/substitution
should start, and upon exit where processing stopped
Returns false if the string could not be parsed and therefore no safe
substitution was possible. Note that macros will have been processed
up to the point where the error occurred. An unmatched closing paren
or brace outside any shell construct is <b>not</b> an error (unlike in
the function below), but still prematurely terminates processing.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #999999;">expandMacrosShellQuote</b> (str)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>bool</i>
          </td>
        </tr>
        <tr>
          <td>
          <i style="color : #aa0000">Not implemented</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>str</td><td>QString</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Same as above, but always starts at position 0, and unmatched closing
parens and braces are treated as errors.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">expandPlainMacro</b> (str, pos, ret)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>int</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>str</td><td>QString</td><td align="right"></td></tr>
              <tr><td>pos</td><td>int</td><td align="right"></td></tr>
              <tr><td>ret</td><td>QStringList</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
This function is called for every single char within the string if
the escape char is QChar.null. It should determine whether the
string starting at <b>pos</b> within <b>str</b> is a valid macro and return
the substitution value for it if so.</p>
<p>
<b>str</b> - the input string</p>
<p>
<b>pos</b> - the offset within <b>str</b></p>
<p>
<b>ret</b> - return value: the string to substitute for the macro
Returns If greater than zero, the number of chars at <b>pos</b> in <b>str</b>
to substitute with <b>ret</b> (i.e., a valid macro was found). If less
than zero, subtract this value from <b>pos</b> (to skip a macro, i.e.,
substitute it with itself). If zero, no macro starts at <b>pos.</b>
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">setEscapeChar</b> (c)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>c</td><td>QChar</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Set the macro escape character.</p>
<p>
<b>c</b> - escape char indicating start of macros, or QChar.null if none
    </td>
  </tr>
</table>

</li><hr>

</li><hr>

</span>
</body>
</html>
