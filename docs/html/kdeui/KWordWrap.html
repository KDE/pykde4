<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
  <title>KWordWrap</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>
<span style="font-size : 10pt;">
<table width="100%">
  <tr>
    <td width ="70%">
      <h1>class KWordWrap</h1><hr>
      <h3><i style="color : #00aa00"></i></h3>
    </td>
  </tr>
</table>
<table cellpadding="10">
  <tr>
    <td valign="top" width="35%">
      <table bgcolor="#f7f7ff" cellpadding="4">
        <tr>
          <td width="10%" align=left>Module</td>
          <td width="30%" align=left>kdeui</td>
        </tr>
        <tr>
          <td width="10%" align=left>Namespace</td>
          <td width="30%" align=left></td>
        </tr>
        <tr>
          <td>Class</td>
          <td>KWordWrap</td>
        </tr>
        <tr>
          <td>Inherits</td>
          <td></td>
        </tr>
      </table>
    </td>
    <td width="65%">
      Word-wrap algorithm that takes into account beautifulness ;)
</p>
<p>
That means:
<li> not letting a letter alone on the last line, </li>
<li> breaking at punctuation signs (not only at spaces) </li>
<li> improved handling of (), [] and {} </li>
<li> improved handling of '/' (e.g. for paths) </li>
</p>
<p>
Usage: call the static method, formatText, with the text to
wrap and the constraining rectangle etc., it will return an instance of KWordWrap
containing internal data, result of the word-wrapping.
From that instance you can retrieve the boundingRect, and invoke drawing.
</p>
<p>
This design allows to call the word-wrap algorithm only when the text changes
and not every time we want to know the bounding rect or draw the text.
</p>
<p>
<b>Author</b> David Faure <faure@kde.org>
    </td>
  </tr>
</table>
<hr>
<hr>
<h3>enums</h3><ul>
<li style="padding-bottom : 8px;"><b>anonymous</b> { FadeOut, Truncate }</li>

</ul><a href="#extended"><i>enum details</i></a><hr>

<h3>methods</h3><ul style="list-style-type : none">
<li style="list-style-type : none"><b style="color : #999999;">KWordWrap</b> (a0)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>ctor</i>
          </td>
        </tr>
        <tr>
          <td>
          <i style="color : #aa0000">Not implemented</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>a0</td><td>KWordWrap</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">

    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #999999;">KWordWrap</b> (r)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>ctor</i>
          </td>
        </tr>
        <tr>
          <td>
          <i style="color : #aa0000">Not implemented</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>r</td><td>QRect</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">

    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">boundingRect</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>QRect</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Returns the bounding rect, calculated by formatText. The width is the
width of the widest text line, and never wider than
the rectangle given to formatText. The height is the
text block. X and Y are always 0.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">drawFadeoutText</b> (p, x, y, maxW, t)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          <b style="color : #0000aa">static</b> 
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>p</td><td>QPainter</td><td align="right"></td></tr>
              <tr><td>x</td><td>int</td><td align="right"></td></tr>
              <tr><td>y</td><td>int</td><td align="right"></td></tr>
              <tr><td>maxW</td><td>int</td><td align="right"></td></tr>
              <tr><td>t</td><td>QString</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Draws the string <b>t</b> at the given coordinates, if it does not
<b>fit</b> into <b>maxW</b> the text will be faded out.</p>
<p>
<b>p</b> - the painter to use. Must have set the pen for the text
color and the background for the color to fade out</p>
<p>
<b>x</b> - the horizontal position of the text</p>
<p>
<b>y</b> - the vertical position of the text</p>
<p>
<b>maxW</b> - the maximum width of the text (including the fade-out
effect)</p>
<p>
<b>t</b> - the text to draw
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">drawText</b> (painter, x, y, flags)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>painter</td><td>QPainter</td><td align="right"></td></tr>
              <tr><td>x</td><td>int</td><td align="right"></td></tr>
              <tr><td>y</td><td>int</td><td align="right"></td></tr>
              <tr><td>flags</td><td>int</td><td align="right">Qt.AlignLeft</td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Draw the text that has been previously wrapped, at position x,y.
Flags are for alignment, e.g. Qt.AlignHCenter. Default is
Qt.AlignAuto.</p>
<p>
<b>painter</b> - the QPainter to use.</p>
<p>
<b>x</b> - the horizontal position of the text</p>
<p>
<b>y</b> - the vertical position of the text</p>
<p>
<b>flags</b> - the ORed text alignment flags from the Qt namespace,
ORed with FadeOut if you want the text to fade out if it
does not fit (the <b>painter's</b> background must be set
accordingly)
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">drawTruncateText</b> (p, x, y, maxW, t)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          <b style="color : #0000aa">static</b> 
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>p</td><td>QPainter</td><td align="right"></td></tr>
              <tr><td>x</td><td>int</td><td align="right"></td></tr>
              <tr><td>y</td><td>int</td><td align="right"></td></tr>
              <tr><td>maxW</td><td>int</td><td align="right"></td></tr>
              <tr><td>t</td><td>QString</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Draws the string <b>t</b> at the given coordinates, if it does not
<b>fit</b> into <b>maxW</b> the text will be truncated.</p>
<p>
<b>p</b> - the painter to use</p>
<p>
<b>x</b> - the horizontal position of the text</p>
<p>
<b>y</b> - the vertical position of the text</p>
<p>
<b>maxW</b> - the maximum width of the text (including the '...')</p>
<p>
<b>t</b> - the text to draw
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">formatText</b> (fm, r, flags, str, len)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>KWordWrap</i>
          </td>
        </tr>
        <tr>
          <td>
          <b style="color : #0000aa">static</b> 
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>fm</td><td>QFontMetrics</td><td align="right"></td></tr>
              <tr><td>r</td><td>QRect</td><td align="right"></td></tr>
              <tr><td>flags</td><td>int</td><td align="right"></td></tr>
              <tr><td>str</td><td>QString</td><td align="right"></td></tr>
              <tr><td>len</td><td>int</td><td align="right">-1</td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Main method for wrapping text.
</p>
<p></p>
<p>
<b>fm</b> - Font metrics, for the chosen font. Better cache it, creating a QFontMetrics is expensive.</p>
<p>
<b>r</b> - Constraining rectangle. Only the width and height matter. With
negative height the complete text will be rendered</p>
<p>
<b>flags</b> - currently unused</p>
<p>
<b>str</b> - The text to be wrapped.</p>
<p>
<b>len</b> - Length of text to wrap (default is -1 for all).
Returns a KWordWrap instance. The caller is responsible for storing and deleting the result.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">truncatedString</b> (dots)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>QString</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>dots</td><td>bool</td><td align="right">1</td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Returns the original string, truncated to the first line.
If <b>dots</b> was set, '...' is appended in case the string was truncated.
Bug: Note that the '...' come out of the bounding rect.
    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">wrappedString</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>QString</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Returns the original string, with '\n' inserted where
the text is broken by the wordwrap algorithm.
    </td>
  </tr>
</table>

</li><hr>

</li><hr>

<a name="extended">
<h3>enums - detail</h3>
<ul style="list-style-type : none">
<li><b>anonymous</b>  { FadeOut, Truncate }
  <p style="padding-top : 9px;">Use this flag in drawText() if you want to fade out the text if it does
not fit into the constraining rectangle.</p>
  <table cellspacing="5">
    <tr>
      <td></td>
      <td valign="top"><i>FadeOut</i></td>
      <td valign="top">- 0x10000000 </td>
      <td valign="top">-</td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td valign="top"><i>Truncate</i></td>
      <td valign="top">- 0x20000000 </td>
      <td valign="top">-</td>
      <td></td>
    </tr>
  </table>
</li>
<hr>
</ul>
</span>
</body>
</html>
