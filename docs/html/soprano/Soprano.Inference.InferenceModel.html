<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
  <title>Soprano.Inference.InferenceModel</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>
<span style="font-size : 10pt;">
<table width="100%">
  <tr>
    <td width ="70%">
      <h1>class InferenceModel</h1><hr>
      <h3><i style="color : #00aa00"></i></h3>
    </td>
  </tr>
</table>
<table cellpadding="10">
  <tr>
    <td valign="top" width="35%">
      <table bgcolor="#f7f7ff" cellpadding="4">
        <tr>
          <td width="10%" align=left>Module</td>
          <td width="30%" align=left>soprano</td>
        </tr>
        <tr>
          <td width="10%" align=left>Namespace</td>
          <td width="30%" align=left>Soprano::Inference</td>
        </tr>
        <tr>
          <td>Class</td>
          <td>InferenceModel</td>
        </tr>
        <tr>
          <td>Inherits</td>
          <td>Soprano::FilterModel</td>
        </tr>
      </table>
    </td>
    <td width="65%">
      \class InferenceModel inferencemodel.h Soprano/Inference/InferenceModel
</p>
<p>
The Soprano Inference Model provides a simple forward chaining inference engine
which uses the underlying parent model itself to store status information.
</p>
<p>
The InferenceModel does perfect inference which means that removing of statements is supported
and results in a perfect update of the infered statements. There is only one exception:
If a model contains two statements in different named graphs that both have the same subject,
predicate, and object and trigger one rule then if one of these statements is removed the
infered statements are removed, too, although the second statement would still make the infered
one valid. This situation gets resolved once the same rule is triggered again by some other
added statement or performInference gets called.
</p>
<p>
The inference is performed based on rules which are stored in Rule instances.
Rules can be created manually or parsed using a RuleParser.
</p>
<p>
<b>The inference engine works roughly as follows:</b>
</p>
<p>
Whenever a new statement is added it is compared to each rule to check if it could trigger this rule.
Then if it could trigger a rule this rule is applied to the whole model.
</p>
<p>
If a rule produces a new infered statement the following data is created:
<li> named graph A containing the infered statements </li>
<li> the statements that triggered the rule are stored in named graph sil:InferenceMetadata as </li>
source statements of A (sil:sourceStatement). The inference model supports two ways of storing
source statements: plain and compressed (see setCompressedSourceStatements).
</p>
<p>
Thus, when removing a statement it can easily be checked if this statement had been used to
infer another one by querying all named graphs that have this statement as a source statement.
</p>
<p>
<b>Author</b> Sebastian Trueg <trueg@kde.org>
    </td>
  </tr>
</table>
<hr>
<hr>
<h3>methods</h3><ul style="list-style-type : none">
<li style="list-style-type : none"><b style="color : #000000;">InferenceModel</b> (parent)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>ctor</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>parent</td><td>Soprano.Model</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">

    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">addRule</b> (a0)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>a0</td><td>Soprano.Inference.Rule</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Add an inference rule to the set of rules.
This method will not trigger any inference action. If inference
is necessary call performInference() after adding the new rules.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">addStatement</b> (a0)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Soprano.Error.ErrorCode</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>a0</td><td>Soprano.Statement</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Add a new statement to the model. Inferencing will be done directly.
Inferenced statements are stored in additional named graphs.
    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">clearInference</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Removes all statements infered by this model.
This can be useful if the parent model has been changed without informing
the inference model and statements have been removed.
    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">performInference</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Normally inferencing is done one new statements are added to the model or
statements are removed. This method performs inferencing on the whole model.
It is useful for initializing a model that already contains statements or
update the model if it has been modified bypassing this filter model.
</p>
<p>
Tha latter can easily be done by connecting the Model.statementsAdded and
Model.statementsRemoved signals to this slot.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">removeAllStatements</b> (a0)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Soprano.Error.ErrorCode</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>a0</td><td>Soprano.Statement</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Remove statements from the model.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">removeStatement</b> (a0)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Soprano.Error.ErrorCode</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>a0</td><td>Soprano.Statement</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Remove one statement from the model.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">setCompressedSourceStatements</b> (b)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>b</td><td>bool</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
If compressed statements are enabled source statements are stored compressed
in one literal value. Otherwise source statements are stored using rdf:subject,
rdf:predicate, rdf:object, and sil:context. Non-compressed statements are much
cleaner from an ontology design point of view while compressed statements take
much less space.
</p>
<p>
By default comressed source statements are enabled.
</p>
<p>
This method exists mainly for historical reasons and there normally is no need
to call it. Compressed statements should work well for most users.
</p>
<p></p>
<p>
<b>b</b> - If true compressed source statements are enabled (the default).
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">setOptimizedQueriesEnabled</b> (b)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>b</td><td>bool</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
If the storage backend supports joined SPARQL queries via UNION
it makes sense to enable this.
</p>
<p></p>
<p>
<b>b</b> - If true InferenceModel will use optimized queries for
the inference during addStatement. This will speed up the
process quite a lot as matching rules are only applied to the new statement.
This flag has no influcence on performInference() though.
</p>
<p>
The default is to disable the optimized queries since the default
soprano redland backend does not support UNION.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">setRules</b> (rules)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>rules</td><td>QList<Soprano::Inference::Rule></td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Set the inference rules to be used.
This method will not trigger any inference action. If inference
is necessary call performInference() after adding the new rules.
    </td>
  </tr>
</table>

</li><hr>

</li><hr>

</span>
</body>
</html>
