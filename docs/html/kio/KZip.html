<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
  <title>KZip</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>
<span style="font-size : 10pt;">
<table width="100%">
  <tr>
    <td width ="70%">
      <h1>class KZip</h1><hr>
      <h3><i style="color : #00aa00"></i></h3>
    </td>
  </tr>
</table>
<table cellpadding="10">
  <tr>
    <td valign="top" width="35%">
      <table bgcolor="#f7f7ff" cellpadding="4">
        <tr>
          <td width="10%" align=left>Module</td>
          <td width="30%" align=left>kio</td>
        </tr>
        <tr>
          <td width="10%" align=left>Namespace</td>
          <td width="30%" align=left></td>
        </tr>
        <tr>
          <td>Class</td>
          <td>KZip</td>
        </tr>
        <tr>
          <td>Inherits</td>
          <td>KArchive</td>
        </tr>
      </table>
    </td>
    <td width="65%">
      This class implements a kioslave to access zip files from KDE.
You can use it in QIODevice.ReadOnly or in QIODevice.WriteOnly mode, and it
behaves just as expected.
It can also be used in QIODevice.ReadWrite mode, in this case one can
append files to an existing zip archive. When you append new files, which
are not yet in the zip, it works as expected, i.e. the files are appended at the end.
When you append a file, which is already in the file, the reference to the
old file is dropped and the new one is added to the zip - but the
old data from the file itself is not deleted, it is still in the
zipfile. so when you want to have a small and garbage-free zipfile,
just read the contents of the appended zip file and write it to a new one
in QIODevice.WriteOnly mode. This is especially important when you don't want
to leak information of how intermediate versions of files in the zip
were looking.
For more information on the zip fileformat go to
http://www.pkware.com/products/enterprise/white_papers/appnote.html
A class for reading/writing zip archives.
<b>Author</b> Holger Schroeder <holger-kde@holgis.net>
    </td>
  </tr>
</table>
<hr>
<hr>
<h3>enums</h3><ul>
<li style="padding-bottom : 8px;"><b>Compression</b> { NoCompression, DeflateCompression }</li>

<li style="padding-bottom : 8px;"><b>ExtraField</b> { NoExtraField, ModificationTime, DefaultExtraField }</li>

</ul><a href="#extended"><i>enum details</i></a><hr>

<h3>methods</h3><ul style="list-style-type : none">
<li style="list-style-type : none"><b style="color : #000000;">KZip</b> (filename)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>ctor</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>filename</td><td>QString</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Creates an instance that operates on the given filename.
using the compression filter associated to given mimetype.
</p>
<p></p>
<p>
<b>filename</b> - is a local path (e.g. "/home/holger/myfile.zip")
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">KZip</b> (dev)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>ctor</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>dev</td><td>QIODevice</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Creates an instance that operates on the given device.
The device can be compressed (KFilterDev) or not (QFile, etc.).
Do not assume that giving a QFile here will decompress the file,
in case it's compressed!</p>
<p>
<b>dev</b> - the device to access
    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">closeArchive</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>bool</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Closes the archive
    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">compression</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>KZip.Compression</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
The current compression mode that will be used for new files.
Returns the current compression mode
</p>
<p>
See also  setCompression()
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">doFinishWriting</b> (size)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>bool</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>size</td><td>qint64</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Write data to a file that has been created using prepareWriting().</p>
<p>
<b>size</b> - the size of the file
Returns true if successful, false otherwise
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">doPrepareWriting</b> (name, user, group, size, perm, atime, mtime, ctime)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>bool</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>name</td><td>QString</td><td align="right"></td></tr>
              <tr><td>user</td><td>QString</td><td align="right"></td></tr>
              <tr><td>group</td><td>QString</td><td align="right"></td></tr>
              <tr><td>size</td><td>qint64</td><td align="right"></td></tr>
              <tr><td>perm</td><td>mode_t</td><td align="right"></td></tr>
              <tr><td>atime</td><td>time_t</td><td align="right"></td></tr>
              <tr><td>mtime</td><td>time_t</td><td align="right"></td></tr>
              <tr><td>ctime</td><td>time_t</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Reimplemented from KArchive
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">doWriteDir</b> (name, user, group, perm, atime, mtime, ctime)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>bool</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>name</td><td>QString</td><td align="right"></td></tr>
              <tr><td>user</td><td>QString</td><td align="right"></td></tr>
              <tr><td>group</td><td>QString</td><td align="right"></td></tr>
              <tr><td>perm</td><td>mode_t</td><td align="right"></td></tr>
              <tr><td>atime</td><td>time_t</td><td align="right"></td></tr>
              <tr><td>mtime</td><td>time_t</td><td align="right"></td></tr>
              <tr><td>ctime</td><td>time_t</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
<b style="color : #ff0000;"><i>Internal </i></b> Not needed for zip
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">doWriteSymLink</b> (name, target, user, group, perm, atime, mtime, ctime)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>bool</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>name</td><td>QString</td><td align="right"></td></tr>
              <tr><td>target</td><td>QString</td><td align="right"></td></tr>
              <tr><td>user</td><td>QString</td><td align="right"></td></tr>
              <tr><td>group</td><td>QString</td><td align="right"></td></tr>
              <tr><td>perm</td><td>mode_t</td><td align="right"></td></tr>
              <tr><td>atime</td><td>time_t</td><td align="right"></td></tr>
              <tr><td>mtime</td><td>time_t</td><td align="right"></td></tr>
              <tr><td>ctime</td><td>time_t</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Reimplemented from KArchive
    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">extraField</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>KZip.ExtraField</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
The current type of "extra field" that will be used for new files.
Returns the current type of "extra field"
</p>
<p>
See also  setExtraField()
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">openArchive</b> (mode)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>bool</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>mode</td><td>QIODevice.OpenMode</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Opens the archive for reading.
Parses the directory listing of the archive
and creates the KArchiveDirectory/KArchiveFile entries.</p>
<p>
<b>mode</b> - the mode of the file
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">setCompression</b> (c)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>c</td><td>KZip.Compression</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Call this before writeFile or prepareWriting, to define whether the next
files to be written should be compressed or not.</p>
<p>
<b>c</b> - the new compression mode
</p>
<p>
See also  compression()
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">setExtraField</b> (ef)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>ef</td><td>KZip.ExtraField</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Call this before writeFile or prepareWriting, to define what the next
file to be written should have in its extra field.</p>
<p>
<b>ef</b> - the type of "extra field"
</p>
<p>
See also  extraField()
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #999999;">virtual_hook</b> (id, data)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          <i style="color : #aa0000">Not implemented</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>id</td><td>int</td><td align="right"></td></tr>
              <tr><td>data</td><td>void</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">

    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">writeData</b> (data, size)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>bool</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>data</td><td>char</td><td align="right"></td></tr>
              <tr><td>size</td><td>qint64</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Write data to a file that has been created using prepareWriting().</p>
<p>
<b>data</b> - a pointer to the data</p>
<p>
<b>size</b> - the size of the chunk
Returns true if successful, false otherwise
    </td>
  </tr>
</table>

</li><hr>

</li><hr>

<a name="extended">
<h3>enums - detail</h3>
<ul style="list-style-type : none">
<li><b>Compression</b>  { NoCompression, DeflateCompression }
  <p style="padding-top : 9px;">Describes the compression type for a given file in the Zip archive.</p>
  <table cellspacing="5">
    <tr>
      <td></td>
      <td valign="top"><i>NoCompression</i></td>
      <td valign="top">- 0 </td>
      <td valign="top">-</td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td valign="top"><i>DeflateCompression</i></td>
      <td valign="top">- 1 </td>
      <td valign="top">-</td>
      <td></td>
    </tr>
  </table>
</li>
<hr>
<li><b>ExtraField</b>  { NoExtraField, ModificationTime, DefaultExtraField }
  <p style="padding-top : 9px;">Describes the contents of the "extra field" for a given file in the Zip archive.</p>
  <table cellspacing="5">
    <tr>
      <td></td>
      <td valign="top"><i>NoExtraField</i></td>
      <td valign="top">- 0 </td>
      <td valign="top">-</td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td valign="top"><i>ModificationTime</i></td>
      <td valign="top">- 1 </td>
      <td valign="top">-</td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td valign="top"><i>DefaultExtraField</i></td>
      <td valign="top">- 1 </td>
      <td valign="top">-</td>
      <td></td>
    </tr>
  </table>
</li>
<hr>
</ul>
</span>
</body>
</html>
