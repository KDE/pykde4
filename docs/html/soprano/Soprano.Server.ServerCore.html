<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
  <title>Soprano.Server.ServerCore</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>
<span style="font-size : 10pt;">
<table width="100%">
  <tr>
    <td width ="70%">
      <h1>class ServerCore</h1><hr>
      <h3><i style="color : #00aa00"></i></h3>
    </td>
  </tr>
</table>
<table cellpadding="10">
  <tr>
    <td valign="top" width="35%">
      <table bgcolor="#f7f7ff" cellpadding="4">
        <tr>
          <td width="10%" align=left>Module</td>
          <td width="30%" align=left>soprano</td>
        </tr>
        <tr>
          <td width="10%" align=left>Namespace</td>
          <td width="30%" align=left>Soprano::Server</td>
        </tr>
        <tr>
          <td>Class</td>
          <td>ServerCore</td>
        </tr>
        <tr>
          <td>Inherits</td>
          <td>QObject,Soprano::Error::ErrorCache</td>
        </tr>
      </table>
    </td>
    <td width="65%">
      \class ServerCore servercore.h Soprano/Server/ServerCore
</p>
<p>
Central %Soprano server class.
</p>
<p>
The %ServerCore provides a %Soprano server which maintains a set
of named Model instances that can be accessed by clients over
a tcp connection through Server.BackendPlugin.
</p>
<p>
Creating a server is very simple: Either derive from ServerCore or
create an instance and then call start() to make the server listen
for incoming connections.
</p>
<p>
<pre>
Soprano.Server.ServerCore core;
core.start();
</pre>
</p>
<p>
Optionally ServerCore can be configured using normal BackendSetting
settings through setBackendSettings().
</p>
<p>
Be aware the ServerCode supports multiple ways of communication.
start() opens a TCP socket to accept new connections, registerAsDBusObject()
registers a DBus interface on the DBus session bus. Both ways of
communication can be used simultaneously.
</p>
<p>
ServerCore is designed for single-threaded usage. Thus, model() uses
Util.AsyncModel to protect against deadlocks.
This behaviour can of course be changed by reimplementing model().
</p>
<p>
<b>Author</b> Sebastian Trueg <trueg@kde.org>
    </td>
  </tr>
</table>
<hr>
<hr>
<h3>methods</h3><ul style="list-style-type : none">
<li style="list-style-type : none"><b style="color : #000000;">ServerCore</b> (parent)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>ctor</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>parent</td><td>QObject</td><td align="right">0</td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">

    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">allModels</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>QStringList</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Retrieve all models that have been loaded.
</p>
<p>
Returns A list of Model names.
    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">backend</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>Soprano.Backend</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
The Backend used by the Server to create Model instances.
    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">backendSettings</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>QList<Soprano::BackendSetting></i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Retrieve the backend settings configured via setBackendSettings().
</p>
<p>
Returns A list of BackendSetting objects.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">createModel</b> (settings)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Soprano.Model</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>settings</td><td>QList<Soprano::BackendSetting></td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Create a new Model. The default implementation uses the configured Backend
with the configured settings to create a new Model. This method can be
reimplemented to create specialized Model, for example in combination with
some FilterModel.
</p>
<p></p>
<p>
<b>settings</b> - The settings to use (a reimplementation may choose to ignore the
settings.)
</p>
<p>
Returns A newly create Model.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">listen</b> (port)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>bool</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>port</td><td>quint16</td><td align="right">DEFAULT_PORT</td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Start the Server. Calling this method will make the Server
listen on the specified port for incoming client connections.
</p>
<p></p>
<p>
<b>port</b> - The port to listen on for client connections.
</p>
<p>
Use Client.TcpClient to connect.
</p>
<p>
Via the TCP connection signals are not supported. Thus, the models created
by it will not emit signals such as Model.statementAdded. Also no permission handling or
any kind of security is implemented at the moment. Thus, if a server is running and is
listening on a port, it is open to connections from any client on any computer in the
network.
</p>
<p>
Returns <b>true</b> if the server was successfully started, <b>false</b> otherwise.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">model</b> (name)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Soprano.Model</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>name</td><td>QString</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Get or create Model with the specific name.
The default implementation will use createModel() to create a new Model
if none with the specified name exists and protect it against deadlocks
with a Util.AsyncModel.
</p>
<p></p>
<p>
<b>name</b> - The name of the requested Model.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">registerAsDBusObject</b> (objectPath)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>objectPath</td><td>QString</td><td align="right">QString()</td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Register the ServerCore as a DBus object. The process needs to be registered
as a DBus service before (QDBusConnection.registerService()).
</p>
<p></p>
<p>
<b>objectPath</b> - The DBus object path to register the server as. If empty
the default path will be used (/org/soprano/Server).
</p>
<p>
Use Client.DBusClient to connect.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">removeModel</b> (name)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>name</td><td>QString</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Remove a model and delete all data in it.
Use with care.
</p>
<p>
Be aware that the Model instance will also be deleted.
</p>
<p>
Should be reimplemented if model() is reimplemented.
</p>
<p></p>
<p>
<b>name</b> - The name of the requested Model.
</p>
<p>
This is not the same as deleting the Model instance.
It will also delete all the data on the harddisk.
    </td>
  </tr>
</table>

</li><hr>

<li><b style="color : #000000;">serverPort</b> ( )
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>quint16</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Returns The port this server is listening on or 0 if listen has not
been called successfully.
</p>
<p>
\since 2.1
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">setBackend</b> (backend)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>backend</td><td>Soprano.Backend</td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">

    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">setBackendSettings</b> (settings)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>Nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>settings</td><td>QList<Soprano::BackendSetting></td><td align="right"></td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Set the settings that are to be used by createModel() to create new Model
instances. Be aware that Soprano.BackendOptionStorageDir will be changed
to include a subdir which is the Model's name.
</p>
<p></p>
<p>
<b>settings</b> - The settings to use for new Models.
    </td>
  </tr>
</table>

</li><hr>

<li style="list-style-type : none"><b style="color : #000000;">start</b> (socketPath)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>bool</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        <tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>
              <tr><td>socketPath</td><td>QString</td><td align="right">QString()</td></tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
Start the core on a local socket.
On Windows this is a named pipe and on Unix this this is a local domain socket.
</p>
<p>
Use Client.LocalSocketClient to connect.
</p>
<p>
Via the local socket connection signals are not supported.
</p>
<p>
Returns <b>true</b> if the local socket could be successfully
opened. <b>false</b> on error. See ErrorCache.lastError() for details.
    </td>
  </tr>
</table>

</li><hr>

</li><hr>

<h3>variables</h3>
<table>
<tr><td width="60%" valign="top"><b>quint16</b> <i>DEFAULT_PORT</i></td><td width="40%" align="left">Set the Backend used in the Server to create Models.</td></tr>
</table>
<hr>

</span>
</body>
</html>
