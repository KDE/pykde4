<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
  <title>KUniqueApplication</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>
<span style="font-size : 10pt;">

<table width="100%">
  <tr>
    <td width ="70%">
      <h1>class KUniqueApplication</h1><hr>
      <h3><i style="color : #00aa00"></i></h3>
    </td>
    <td  width="30%" valign="top" align="right">
      <table>
        <tr><td align="right"><a href="../index.html">Table of contents</a></td></tr>
        <tr><td align="right"><a href="../modules.html">Modules</a></td></tr>
        <tr><td align="right"><a href="index.html">kdeui Classes</a></td></tr>
        <tr><td align="right"><a href="../allclasses.html">All Classes</a></td></tr>
      </table>
    </td>
  </tr>
</table>
<table cellpadding="10">
  <tr>
    <td valign="top" width="35%">
      <table bgcolor="#f7f7ff" cellpadding="4">
        <tr>
          <td width="10%" align=left>Module</td>
          <td width="30%" align=left>kdeui</td>
        </tr>
        <tr>
          <td width="10%" align=left>Namespace</td>
          <td width="30%" align=left>global</td>
        </tr>
        <tr>
          <td>Class</td>
          <td>KUniqueApplication</td>
        </tr>
        <tr>
          <td>Inherits</td>
          <td>KApplication</td>
        </tr>
      </table>
    </td>
    <td width="65%">
      <p>
Maintains only a single instance of a running application at a time.
Please note that this supports only one instance per KDE session. If
your application can only be opened once per user or once per host, you
need to ensure this independently of KUniqueApplication.
</p>
<p>
If another instance
is started, it will determine (via DBUS) whether it is the first instance
or a second instance. If it is a second instance, it will forward on
the information to the first instance and then quit.
</p>
<p>
The .desktop file for the application should state X-DBUS-StartupType=Unique,
see ktoolinvocation.h
</p>
<p>
</p>

    </td>
  </tr>
</table>
<hr>
<hr>

<h3>methods</h3><ul style="list-style-type : none">
<li style="list-style-type : none"><b style="color : #000000;">KUniqueApplication</b> (GUIenabled, configUnique)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>a KUniqueApplication object</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>

              <tr><td>GUIenabled</td><td>bool</td><td align="right">True</td></tr>

              <tr><td>configUnique</td><td>bool</td><td align="right">False</td></tr>

            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
<p>
Constructor. Takes command line arguments from KCmdLineArgs
</p>
<p>
</p>
<p>
<b>GUIenabled</b> - Set to false to disable all GUI stuff. This implies
no styles either.
</p>
<p>
<b>configUnique</b> - If true, the uniqueness of the application will
depend on the value of the "MultipleInstances"
key in the "KDE" group of the application config file.
</p>

    </td>
  </tr>
</table>


</li><hr>


<li style="list-style-type : none"><b style="color : #000000;">KUniqueApplication</b> (display, visual, colormap, configUnique)
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table vspace="5">
        <tr>
          <td>
            returns <i>a KUniqueApplication object</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr  bgcolor="#e7e7ff">
                <th>Argument</th><th>Type</th><th>Default</th>
              </tr>

              <tr><td>display</td><td>Display</td><td align="right"></td></tr>

              <tr><td>visual</td><td>Qt.HANDLE</td><td align="right">0</td></tr>

              <tr><td>colormap</td><td>Qt.HANDLE</td><td align="right">0</td></tr>

              <tr><td>configUnique</td><td>bool</td><td align="right">False</td></tr>

            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
<p>
Constructor. Takes command line arguments from KCmdLineArgs
</p>
<p>
</p>
<p>
<b>display</b> - Will be passed to Qt as the X display. The display
must be valid and already opened.
</p>
<p>
</p>
<p>
<b>visual</b> - Pointer to the X11 visual that should be used by the
application. If 0, the default visual will be used instead.
</p>
<p>
</p>
<p>
<b>colormap</b> - The colormap that should be used by the application.
If 0, the default colormap will be used instead.
</p>
<p>
</p>
<p>
<b>configUnique</b> - If true, the uniqueness of the application will
depend on the value of the "MultipleInstances"
key in the "KDE" group of the application config file.
</p>

    </td>
  </tr>
</table>


</li><hr>


<li><b style="color : #000000;">addCmdLineOptions</b> ()
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          <i style="color : #0000ff">static</i>
          </td>
        </tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>

            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
<p>
Adds command line options specific for KUniqueApplication.
</p>
<p>
Should be called before calling KUniqueApplication constructor
and / or start().
</p>

    </td>
  </tr>
</table>


</li><hr>


<li><b style="color : #000000;">newInstance</b> ()
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>(int)</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>

            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
<p>
Creates a new "instance" of the application.
</p>
<p>
Usually this will involve making some calls into the GUI portion of your
application asking for a new window to be created, possibly with
some data already loaded based on the arguments received.
</p>
<p>
Command line arguments have been passed to KCmdLineArgs before this
function is called and can be checked in the usual way.
</p>
<p>
The default implementation ensures the mainwindow of the already
running instance is shown and activated if necessary. You should
prefer using it from your overridden method instead of doing
it directly.
</p>
<p>
Note that newInstance() is called also in the first started
application process.
</p>
<p>
Returns An exit value. The calling process will exit with this value.
</p>

    </td>
  </tr>
</table>


</li><hr>


<li><b style="color : #000000;">restoringSession</b> ()
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>(bool)</i>
          </td>
        </tr>
        <tr>
          <td>
          
          </td>
        </tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>

            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
<p>
Returns whether newInstance() is being called while session
restoration is in progress.
</p>

    </td>
  </tr>
</table>


</li><hr>


<li><b style="color : #000000;">setHandleAutoStarted</b> ()
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>nothing</i>
          </td>
        </tr>
        <tr>
          <td>
          <i style="color : #0000ff">static</i>
          </td>
        </tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>

            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
<p>
<b style="color : #ff0000;"><i>Internal </i></b>
</p>

    </td>
  </tr>
</table>


</li><hr>


<li><b style="color : #000000;">start</b> ()
<table width="100%">
  <tr>
    <td width="60%" valign="top">
      <table>
        <tr>
          <td>
            returns <i>(bool)</i>
          </td>
        </tr>
        <tr>
          <td>
          <i style="color : #0000ff">static</i>
          </td>
        </tr>
        <tr valign="bottom">
          <td>
            <table>
              <tr><td></td></tr>

            </table>
          </td>
        </tr>
      </table>
    </td>
    <td width="40%" align="left">
<p>
Forks and registers with D-Bus.
</p>
<p>
The command line arguments are being sent via D-Bus to newInstance()
and will be received once the application enters the event loop.
</p>
<p>
Typically this is used like:
<pre>
int main(int argc, char **argv) {
KAboutData about("myappname", 0, ki18n("myAppName"), .....);
KCmdLineArgs.init(argc, argv, &about);
KCmdLineArgs.addCmdLineOptions( myCmdOptions );
KUniqueApplication.addCmdLineOptions();
</p>
<p>
if (!KUniqueApplication.start()) {
fprintf(stderr, "myAppName is already running!\n");
return 0;
}
KUniqueApplication a;
return a.exec();
}
</pre>
Note that it's not necessary to call start() explicitly. It will be
called automatically before creating KUniqueApplication if it hasn't
been called yet, without any performance impact.
</p>
<p>
Also note that you MUST call KUniqueApplication.addCmdLineOptions(),
if you use command line options before start() is called.
</p>
<p>
Returns true if registration is successful.
false if another process was already running.
</p>

    </td>
  </tr>
</table>


</li><hr>


</li><hr>


</span>
</body>
</html>
