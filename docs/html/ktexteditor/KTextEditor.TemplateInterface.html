<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
  <title>KTextEditor.TemplateInterface</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <link rel="stylesheet" type="text/css" href="../common/doxygen.css" />
  <link rel="stylesheet" media="screen" type="text/css" title="KDE Colors" href="../common/kde.css" />
</head>
<body>
<div id="container">
<div id="header">
  <div id="header_top">
    <div>
      <div>
        <img alt ="" src="../common/top-kde.jpg"/>
        KDE 4.9 PyKDE API Reference
      </div>
    </div>
  </div>
  <div id="header_bottom">
    <div id="location">
      <ul>
        <li>KDE's Python API</li>
      </ul>
    </div>

    <div id="menu">
      <ul>
        <li><a href="../modules.html">Overview</a></li>
<li><a href="http://techbase.kde.org/Development/Languages/Python">PyKDE Home</a></li>
<li><a href="http://kde.org/family/">Sitemap</a></li>
<li><a href="http://kde.org/contact/">Contact Us</a></li>
</ul>
    </div>
  </div>
</div>

<div id="body_wrapper">
<div id="body">
<div id="right">
<div class="content">
<div id="main">
<div class="clearer">&nbsp;</div>

<h1>TemplateInterface Class Reference</h1>
<code>from PyKDE4.ktexteditor import *</code>
<p>


Namespace: <a href="../ktexteditor/KTextEditor.html">KTextEditor</a><br />
<h2>Detailed Description</h2>

<p>This is an interface for inserting template strings with user editable
fields into a document.
</p>
<table border="0" cellpadding="0" cellspacing="0"><tr><td colspan="2"><br><h2>Methods</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="#TemplateInterface">__init__</a> (self)</td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="#KTE_INTERNAL_setupIntialValues">KTE_INTERNAL_setupIntialValues</a> (self, QString templateString, {QString:QString} initialValues)</td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="#insertTemplateText">insertTemplateText</a> (self, <a href="../ktexteditor/KTextEditor.Cursor.html">KTextEditor.Cursor</a> insertPosition, QString templateString, {QString:QString} initialValues)</td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="#insertTemplateTextImplementation">insertTemplateTextImplementation</a> (self, <a href="../ktexteditor/KTextEditor.Cursor.html">KTextEditor.Cursor</a> insertPosition, QString templateString, {QString:QString} initialValues)</td></tr>
<tr><td colspan="2"><br><h2>Static Methods</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="#expandMacros">expandMacros</a> ({QString:QString} initialValues, QWidget parentWindow)</td></tr>
</table>
<hr><h2>Method Documentation</h2><a class="anchor" name="TemplateInterface"></a>
<div class="memitem">
<div class="memproto">
<table class="memname"><tr>
<td class="memname">__init__</td>
<td>(</td>
<td class="paramtype">&nbsp;</td>
<td class="paramname"><em>self</em>&nbsp;)</td>
<td width="100%"> </td>
</tr>
</table>
</div>
<div class="memdoc"></div></div><a class="anchor" name="KTE_INTERNAL_setupIntialValues"></a>
<div class="memitem">
<div class="memproto">
<table class="memname"><tr>
<td class="memname">bool KTE_INTERNAL_setupIntialValues</td>
<td>(</td>
<td class="paramtype">&nbsp;<em>self</em>, </td>
<td class="paramname"></td>
</tr><tr>
<td class="memname"></td>
<td></td>
<td class="paramtype">QString&nbsp;</td>
<td class="paramname"><em>templateString</em>, </td>
</tr>
<tr>
<td class="memname"></td>
<td></td>
<td class="paramtype">{QString:QString}&nbsp;</td>
<td class="paramname"><em>initialValues</em></td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td>
<td></td>
<td width="100%"> </td>
</tr></table>
</div>
<div class="memdoc"><p>DO NOT USE !!!! THIS IS USED INTERNALLY by the interface only !!!!!!
Behaviour might change !!!!!!!
</p></div></div><a class="anchor" name="insertTemplateText"></a>
<div class="memitem">
<div class="memproto">
<table class="memname"><tr>
<td class="memname">bool insertTemplateText</td>
<td>(</td>
<td class="paramtype">&nbsp;<em>self</em>, </td>
<td class="paramname"></td>
</tr><tr>
<td class="memname"></td>
<td></td>
<td class="paramtype"><a href="../ktexteditor/KTextEditor.Cursor.html">KTextEditor.Cursor</a>&nbsp;</td>
<td class="paramname"><em>insertPosition</em>, </td>
</tr>
<tr>
<td class="memname"></td>
<td></td>
<td class="paramtype">QString&nbsp;</td>
<td class="paramname"><em>templateString</em>, </td>
</tr>
<tr>
<td class="memname"></td>
<td></td>
<td class="paramtype">{QString:QString}&nbsp;</td>
<td class="paramname"><em>initialValues</em></td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td>
<td></td>
<td width="100%"> </td>
</tr></table>
</div>
<div class="memdoc"><p>Inserts an interactive ediable template text at line "line", column "col".
<dl class="return" compact><dt><b>Returns:</b></dt><dd> true if inserting the string succeeded
</dd></dl> </p>
<p>
Use insertTemplateText(lines(), ...) to append text at end of document
Template strings look like
"for( int ${index}=0;${index}&lt;10;${index}++) { ${cursor} };"
or "%{date}"
</p>
<p>
This syntax is somewhat similar to the one found in the Eclipse editor or textmate.
</p>
<p>
There are certain common placeholders (macros), which get assigned a
default initialValue, If the second parameter does not a given value.
For all others the initial value is the name of the placeholder.
</p>
<p>
Placeholder names may only consist of a-zA-Z0-9_
</p>
<p>
<dl class="since" compact><dt><b>Since:</b></dt><dd> 4.5
if a placeholder is a mirror, the place holder name may contain additional information
${something/regexp/replacement/} takes the value of the placeholder something and replaces the match with the replacement before inserting the mirrored value
${something/regexp/replacement/g} like above, but for all occurences
The syntax of the regexp and the replacement are the ones from kateparts regexp search/replace
${something/regexp/replacement/i} like above, but case insensitive
The syntax of the regexp and the replacement are the ones from kateparts regexp search/replace
Possible flags: g and i. Those flags can be combined too
If a literal / should appear in the regexp, it has to be escaped \/,
literal \ has to be escaped too
</dd></dl> </p>
<p>
If you have mirrored ranges and want another occurence than the first one as the master
you can add @directly after the placeholder name.
</p>
<p>
The interface2 version invokes the function specified by functionName within the script specified
by the scriptToken, if a placeholder is specified with backticks like
${placeholder`functionName`}
The function has a global environment containing "view", "document" and "debug", at
least in the katepart implementation. The function invokation is not allowed to be mixed with other replacements
</p>
<p>
If a / or ` replacement is done on a master the initial value is modified and therefor
also all mirrored placeholders are affected too, later on the replacement is not done anymore on master ranges
</p>
<p>
The parameters for invoked javascript functions will be the following:
value of the master (or initial value), //to be done: placeholder name, small wrapper around the template handler (to do more sophisticated things, like adding additional placehlder points, aattaching custom properties for state keeping, ....) you tell
</p>
<p>
Specification of initial values
You can specify initial values which are different from the placeholder name
this is done via, this makes only sense for $ placeholders, not for %
${placeholder:some value} or ${placeholder@:some value}
It is not allowed to mix : and /
after the first colon, everything is interpreted as default value, } in
the default value have to be escaped (backslashes before } have to be escaped themselves) and regexp searches are ignored. The : has to be
directly after the placeholder name or after an optional @symbol.
</p>
<p>
Common placeholders and values are
</p>
<p>
- index: "i"
- loginname: The current users's loginname
- firstname: The current user's first name retrieved from kabc
- lastname: The current user's last name retrieved from kabc
- fullname: The current user's first and last name retrieved from kabc
- email: The current user's primary email address retrieved from kabc
- date: current date
- time: current time
- year: current year
- month: current month
- day: current day
- hostname: hostname of the computer
- selection: The implementation should set this to the selected text, if any
- cursor: at this position the cursor will be after editing of the
template has finished, this has to be taken care of by the actual
implementation. The placeholder gets a value of "|" assigned.
</p>
<p>
If a macro is started with a % (persent sign) like "%{date}" it isn't added
to the list editable strings ( for example TAB key navigation) if a value
differing from the macro name is found.
</p>
<p>
If the editor supports some kind of smart indentation, the inserted code
should be layouted by the indenter.
<dl class="deprecated" compact><dt><b>Deprecated:</b></dt><dd>
</dd></dl>
</p></div></div><a class="anchor" name="insertTemplateTextImplementation"></a>
<div class="memitem">
<div class="memproto">
<table class="memname"><tr>
<td class="memname">bool insertTemplateTextImplementation</td>
<td>(</td>
<td class="paramtype">&nbsp;<em>self</em>, </td>
<td class="paramname"></td>
</tr><tr>
<td class="memname"></td>
<td></td>
<td class="paramtype"><a href="../ktexteditor/KTextEditor.Cursor.html">KTextEditor.Cursor</a>&nbsp;</td>
<td class="paramname"><em>insertPosition</em>, </td>
</tr>
<tr>
<td class="memname"></td>
<td></td>
<td class="paramtype">QString&nbsp;</td>
<td class="paramname"><em>templateString</em>, </td>
</tr>
<tr>
<td class="memname"></td>
<td></td>
<td class="paramtype">{QString:QString}&nbsp;</td>
<td class="paramname"><em>initialValues</em></td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td>
<td></td>
<td width="100%"> </td>
</tr></table>
</div>
<div class="memdoc"><dl compact><dt><b>Abstract method:</b></dt><dd>This method is abstract and can be overridden but not called directly.</dd></dl><p>You must implement this, it is called by insertTemplateText, after all
default values are inserted. If you are implementing this interface,
this method should work as described in the documentation for
insertTemplateText above.
<dl class="return" compact><dt><b>Returns:</b></dt><dd> true if any text was inserted.
</dd></dl> <dl class="deprecated" compact><dt><b>Deprecated:</b></dt><dd>
</dd></dl>
</p></div></div><hr><h2>Static Method Documentation</h2><a class="anchor" name="expandMacros"></a>
<div class="memitem">
<div class="memproto">
<table class="memname"><tr>
<td class="memname">bool expandMacros</td>
<td>(</td>
<td class="paramtype">{QString:QString}&nbsp;</td>
<td class="paramname"><em>initialValues</em>, </td>
</tr>
<tr>
<td class="memname"></td>
<td></td>
<td class="paramtype">QWidget&nbsp;</td>
<td class="paramname"><em>parentWindow</em></td>
</tr>
<tr>
<td></td>
<td>)</td>
<td></td>
<td></td>
<td width="100%"> </td>
</tr></table>
</div>
<div class="memdoc"><p>Parses <b>templateString</b> for macros in the form [$%]{NAME} and finds
the value corresponding to NAME if any. The NAME string may contain
any non-whitespace character execpt '}'
</p><dl compact><dt><b>Parameters:</b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td></td><td valign="top"><em>initialValues</em>&nbsp;</td><td> a map with the keys for the macros to expand.
keys with a value are ignored.
</td></tr> </table></dl>
<p> </p><dl compact><dt><b>Parameters:</b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td></td><td valign="top"><em>parentWindow</em>&nbsp;</td><td> is used if dialogs have to be shown
</td></tr> </table></dl>
<p> <dl class="return" compact><dt><b>Returns:</b></dt><dd> true if all macros was successfully expanded
</dd></dl> <dl class="see" compact><dt><b>See also:</b></dt><dd> insertTemplateText for a list of supported macros
</dd></dl>
</p></div></div>
</div>
</div>
</div>

<div id="left">

<div class="menu_box">
<div class="nav_list">
<ul>
<li><a href="../allclasses.html">Full Index</a></li>
</ul>
</div>

<a name="cp-menu" /><div class="menutitle"><div>
  <h2 id="cp-menu-project">Modules</h2>
</div></div>
<div class="nav_list">
<ul><li><a href="../akonadi/index.html">akonadi</a></li>
<li><a href="../dnssd/index.html">dnssd</a></li>
<li><a href="../kdecore/index.html">kdecore</a></li>
<li><a href="../kdeui/index.html">kdeui</a></li>
<li><a href="../khtml/index.html">khtml</a></li>
<li><a href="../kio/index.html">kio</a></li>
<li><a href="../knewstuff/index.html">knewstuff</a></li>
<li><a href="../kparts/index.html">kparts</a></li>
<li><a href="../kutils/index.html">kutils</a></li>
<li><a href="../nepomuk/index.html">nepomuk</a></li>
<li><a href="../phonon/index.html">phonon</a></li>
<li><a href="../plasma/index.html">plasma</a></li>
<li><a href="../polkitqt/index.html">polkitqt</a></li>
<li><a href="../solid/index.html">solid</a></li>
<li><a href="../soprano/index.html">soprano</a></li>
</ul></div></div>

</div>

</div>
  <div class="clearer"/>
</div>

<div id="end_body"></div>
</div>
<div id="footer"><div id="footer_text">
This documentation is maintained by <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;simon&#64;simonzone&#46;com">Simon Edwards</a>.<br />
        KDE<sup>&#174;</sup> and <a href="../images/kde_gear_black.png">the K Desktop Environment<sup>&#174;</sup> logo</a> are registered trademarks of <a href="http://ev.kde.org/" title="Homepage of the KDE non-profit Organization">KDE e.V.</a> |
        <a href="http://www.kde.org/contact/impressum.php">Legal</a>
    </div></div>
</body>
</html>
